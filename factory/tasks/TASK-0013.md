# TASK-0013: Factory UI v2 (Multi-page with Drill-down)

**Priority**: P1
**Type**: Feature
**Dependencies**: TASK-0012

## Context

Current UI is a single `/factory/control` page. We need a multi-page interface with drill-down:
- List views with filtering
- Detail views for each entity
- Apple-like minimal design

## Scope

### Routes to create:

```
/factory                    - Dashboard overview (update existing)
/factory/ventures           - Ventures list
/factory/ventures/[id]      - Venture details
/factory/tasks              - Tasks list
/factory/tasks/[id]         - Task details (TASK + REPORT)
/factory/audit              - Audit log
/factory/audit/[id]         - Audit entry details
/factory/metrics            - Metrics overview (placeholder)
```

### Components to create:

```
src/components/ControlPanel/
  - VenturesList.tsx
  - VentureDetail.tsx
  - TasksList.tsx
  - TaskDetail.tsx
  - AuditList.tsx
  - AuditDetail.tsx
  - SearchFilter.tsx (simple text filter)
  - Breadcrumbs.tsx
  - EmptyState.tsx
```

## Non-Goals

- No authentication
- No complex filtering (just simple text search)
- No pagination (show all, use virtual scroll if needed later)
- No payments page implementation (just placeholder)
- No real-time updates

## Description

### 1. Create route structure

Use Next.js App Router with:
- Server Components by default
- Dynamic routes with `[id]` segments
- Loading states with `loading.tsx`

### 2. Design principles

- **Apple-like minimal**: lots of whitespace, clear typography
- **One primary CTA per page**
- **Consistent navigation**: breadcrumbs + sidebar
- **Mobile-first**: responsive tables, collapsible sections

### 3. Data flow

```
Page (Server Component)
  └─> calls loader.ts functions
  └─> passes data to components
  └─> components render (can be client if interactive)
```

### 4. Navigation update

Update Header.tsx with:
- Ventures link
- Tasks link
- Audit link
- Active state indicator

### 5. List views

Each list view has:
- Title + count
- Simple search input
- Table/cards with key info
- Click to drill down

### 6. Detail views

Each detail view has:
- Breadcrumbs (Factory > Tasks > TASK-0010)
- Title + status badge
- Main content (markdown rendered)
- Related items sidebar
- Back button

## Acceptance Criteria

- [ ] All routes render without errors
- [ ] Navigation between pages works
- [ ] List views show data from loader
- [ ] Detail views show full content
- [ ] Search/filter works on list views
- [ ] Mobile responsive
- [ ] TypeScript strict mode passes
- [ ] Build succeeds

## Test Plan

1. Navigate to each route manually
2. Click through list -> detail -> back
3. Use search filter on each list
4. Test on mobile viewport
5. Run `npm run build`
6. Run `npm run lint`

## Rollback Plan

- Remove new route directories
- Revert Header.tsx changes
- Keep `/factory/control` as fallback

## Outputs Required

- `factory/results/TASK-0013-REPORT.md`
- PR_LINK
- CI_STATUS: green
